import{r as W,j as e,n as x,u as p,b as w,_ as y,f as v,a as P,d as f,e as C,H as A,I as k,J as M}from"./index-Dxkm9OBN.js";import{e as T,g as $,h as E,i as R,j as H,k as I,l as q}from"./Header-DiS-RBAy.js";import{M as h}from"./Modal-CetgO2M2.js";import{I as D}from"./index-DPwev8wJ.js";

function _({images:s}){const t=s.length; const [a,n]=W.useState(0); const i=r=>{r==="inc"&&(a===t-1?n(0):n(o=>o+1)),r==="dec"&&n(a===0?t-1:o=>o-1)};return e.jsx("div",{className:"relative mx-auto max-w-[35rem] ",children:e.jsxs("div",{className:" mx-auto flex w-72 items-center justify-center bg-stone-50 sm:w-[35rem]",children:[e.jsx("button",{className:"absolute left-12 top-1/2 -translate-y-1/2 ",onClick:()=>i("dec"),children:e.jsx(T,{})}),e.jsx(J,{src:s[a]}),e.jsx("button",{className:"absolute right-12 top-1/2 -translate-y-1/2",onClick:()=>i("inc"),children:e.jsx($,{})})]})})}function J({src:s}){return e.jsx("img",{className:"mx-auto  aspect-square object-contain object-center",src:s})}const O=["January","February","March","April","May","June","July","August","September","October","November","December"]; const u=()=>Math.random().toString(36).substr(2,6); const j=s=>`$${s.toFixed(2)}`; const es=s=>`${O[new Date(s).getMonth()]} ${new Date(s).getFullYear()}`;function Q({rating:s,maxRating:t,color:a="#FFC633",size:n="1rem"}){const i=Math.floor(s); const r=Math.ceil(s-i); const o=t-(i+r);return e.jsx("div",{children:e.jsxs("ul",{className:"flex gap-2",children:[Array.from({length:i}).map(c=>e.jsx("li",{children:e.jsx(E,{color:a,size:n})},u())),Array.from({length:r}).map(c=>e.jsx("li",{children:e.jsx(R,{color:a,size:n})},u())),Array.from({length:o}).map(c=>e.jsx("li",{children:e.jsx(H,{color:a,size:n})},u()))]})})}function U({price:s}){const t=s.current.value; const a=s.current.discount; const n=t-t/100*a;return e.jsxs("p",{className:"my-4 flex items-center gap-2 text-sm font-semibold capitalize md:gap-4 md:text-2xl",children:[j(n),e.jsx("span",{className:"text-stone-400 line-through",children:j(t)}),e.jsxs("span",{className:"rounded-full bg-red-100 px-2 py-1 text-[1rem] text-red-400 md:px-6",children:[a,"%"]})]})}const ts=async()=>{try{return(await x("wishlist")).data.data.wishList}catch(s){throw new Error(s.response.data.message)}}; const K=async s=>{try{await x("wishlist",{method:"PATCH",data:{productId:s}})}catch(t){throw new Error(t.response.data.message)}}; const B=async s=>{try{await x("wishlist",{method:"DELETE",data:{productId:s}})}catch(t){throw new Error(t.response.data.message)}};function G(){const s=p(); const {mutate:t,isPending:a}=w({mutationFn:K,onSuccess:()=>{y.success("Product added to wishlist successfully"),s.invalidateQueries({queryKey:["wishlist"]})}});return{addToWishList:t,isAdding:a}}function Y(){const s=p(); const {mutate:t,isPending:a}=w({mutationFn:B,onSuccess:()=>{y.success("Product removed from wishlist successfully"),s.invalidateQueries({queryKey:["wishlist"]})}});return{removeFromWishList:t,isPending:a}}function V({top:s,left:t,right:a,bottom:n,productId:i}){const r=v(); const o=P(); const c=f(C); const {addToWishList:b,isAdding:L}=G(); const {removeFromWishList:F,isRemoving:N}=Y(); const S=f(A)||[]; const l=L||N; const m=S.some(d=>d===i);function g(d){if(d.stopPropagation(),!c)return r("/login");m?F(i,{onSuccess:o(k(i))}):b(i,{onSuccess:o(M(i))})}return e.jsxs("div",{className:"absolute right-4 top-4",children:[l&&e.jsx(I,{}),!l&&m&&e.jsx(q,{className:"cursor-pointer text-xl text-pink-500",role:"button",onClick:g}),!l&&!m&&e.jsx(D,{className:"cursor-pointer text-xl",role:"button",onClick:g})]})}function as({product:s,size:t}){const a=v(); const n=t==="sm"?"w-[10.7rem]":"w-44"; const i=r=>{r.stopPropagation(),a(`/shop/${s._id}`)};return e.jsxs(h,{children:[e.jsxs("div",{className:"shrink-1 relative w-40 cursor-pointer md:w-72",children:[e.jsx(V,{productId:s._id}),e.jsx(h.Open,{id:s._id,children:e.jsx("img",{className:`aspect-square ${n} overflow-hidden rounded-xl bg-stone-200 object-cover object-top md:w-72`,src:s.imageUrl,alt:"product"})}),e.jsxs("div",{onClick:i,children:[e.jsx("h4",{className:"font-bold",children:s.name}),e.jsx(Q,{rating:s.rating.rate,maxRating:5}),e.jsx(U,{price:s.price})]})]}),e.jsx(h.Window,{id:s._id,children:e.jsx(_,{images:[s.imageUrl,...s.additionalImageUrls]})})]})}export{U as P,Q as S,as as a,ts as b,es as f};
