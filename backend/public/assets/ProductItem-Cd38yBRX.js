import{r as P,j as e,I as x,n as h,u as f,b as j,_ as w,f as p,a as C,d as g,e as F,J as T,K as k,M as S}from"./index-00F4N1Wb.js";import{e as E,g as q,h as A,i as I,M as m,S as R}from"./Header-CF4FsExV.js";import{I as _}from"./index-BzYH-nAS.js";function $({images:s}){const t=s.length,[i,n]=P.useState(0),a=r=>{r==="inc"&&(i===t-1?n(0):n(o=>o+1)),r==="dec"&&n(i===0?t-1:o=>o-1)};return e.jsx("div",{className:"relative mx-auto max-w-[35rem] ",children:e.jsxs("div",{className:" mx-auto flex w-72 items-center justify-center bg-stone-50 sm:w-[35rem]",children:[e.jsx("button",{className:"absolute left-12 top-1/2 -translate-y-1/2 ",onClick:()=>a("dec"),children:e.jsx(E,{})}),e.jsx(M,{src:s[i]}),e.jsx("button",{className:"absolute right-12 top-1/2 -translate-y-1/2",onClick:()=>a("inc"),children:e.jsx(q,{})})]})})}function M({src:s}){return e.jsx("img",{className:"mx-auto  aspect-square object-contain object-center",src:s})}function H({price:s}){const t=s.current.value,i=s.current.discount,n=t-t/100*i;return e.jsxs("p",{className:"my-4 flex items-center gap-2 text-sm font-semibold capitalize md:gap-4 md:text-2xl",children:[x(n),e.jsx("span",{className:"text-stone-400 line-through",children:x(t)}),e.jsxs("span",{className:"rounded-full bg-red-100 px-2 py-1 text-[1rem] text-red-400 md:px-6",children:[i,"%"]})]})}const J=async()=>{try{return(await h("wishlist")).data.data.wishList}catch(s){throw new Error(s.response.data.message)}},K=async s=>{try{await h("wishlist",{method:"PATCH",data:{productId:s}})}catch(t){throw new Error(t.response.data.message)}},Q=async s=>{try{await h("wishlist",{method:"DELETE",data:{productId:s}})}catch(t){throw new Error(t.response.data.message)}};function U(){const s=f(),{mutate:t,isPending:i}=j({mutationFn:K,onSuccess:()=>{w.success("Product added to wishlist successfully"),s.invalidateQueries({queryKey:["wishlist"]})}});return{addToWishList:t,isAdding:i}}function D(){const s=f(),{mutate:t,isPending:i}=j({mutationFn:Q,onSuccess:()=>{w.success("Product removed from wishlist successfully"),s.invalidateQueries({queryKey:["wishlist"]})}});return{removeFromWishList:t,isPending:i}}function O({top:s,left:t,right:i,bottom:n,productId:a}){const r=p(),o=C(),v=g(F),{addToWishList:L,isAdding:y}=U(),{removeFromWishList:b,isRemoving:W}=D(),N=g(T)||[],c=y||W,l=N.some(d=>d===a);function u(d){if(d.stopPropagation(),!v)return r("/login");l?b(a,{onSuccess:o(k(a))}):L(a,{onSuccess:o(S(a))})}return e.jsxs("div",{className:"absolute right-4 top-4",children:[c&&e.jsx(A,{}),!c&&l&&e.jsx(I,{className:"cursor-pointer text-xl text-pink-500",role:"button",onClick:u}),!c&&!l&&e.jsx(_,{className:"cursor-pointer text-xl",role:"button",onClick:u})]})}function V({product:s,size:t}){const i=p(),n=t==="sm"?"w-[10.7rem]":"w-44",a=r=>{r.stopPropagation(),i(`/shop/${s._id}`)};return e.jsxs(m,{children:[e.jsxs("div",{className:"shrink-1 relative w-40 cursor-pointer md:w-72",children:[e.jsx(O,{productId:s._id}),e.jsx(m.Open,{id:s._id,children:e.jsx("img",{className:`aspect-square ${n} overflow-hidden rounded-xl bg-stone-200 object-cover object-top md:w-72`,src:s.imageUrl,alt:"product"})}),e.jsxs("div",{onClick:a,children:[e.jsx("h4",{className:"font-bold",children:s.name}),e.jsx(R,{rating:s.rating.rate,maxRating:5}),e.jsx(H,{price:s.price})]})]}),e.jsx(m.Window,{id:s._id,children:e.jsx($,{images:[s.imageUrl,...s.additionalImageUrls]})})]})}export{H as P,V as a,J as f};
