import{r as W,j as e,e as g,f as w,h as v,_ as l,u as y,b as C,a as j,m as P,B as k,C as A,D as E}from"./index-BnkrY95Y.js";import{g as M,h as T,i as $,j as R,k as D,G as q,l as H,m as I}from"./Header-DkqKkmjD.js";import{M as u}from"./Modal-BP3FVn9n.js";function _({images:s}){const t=s.length,[a,n]=W.useState(0),i=r=>{r==="inc"&&(a===t-1?n(0):n(o=>o+1)),r==="dec"&&n(a===0?t-1:o=>o-1)};return e.jsx("div",{className:"relative mx-auto max-w-[35rem] ",children:e.jsxs("div",{className:" mx-auto flex w-72 items-center justify-center bg-stone-50 sm:w-[35rem]",children:[e.jsx("button",{className:"absolute left-12 top-1/2 -translate-y-1/2 ",onClick:()=>i("dec"),children:e.jsx(M,{})}),e.jsx(B,{src:s[a]}),e.jsx("button",{className:"absolute right-12 top-1/2 -translate-y-1/2",onClick:()=>i("inc"),children:e.jsx(T,{})})]})})}function B({src:s}){return e.jsx("img",{className:"mx-auto  aspect-square object-contain object-center",src:s})}const G=["January","February","March","April","May","June","July","August","September","October","November","December"],x=()=>Math.random().toString(36).substr(2,6),p=s=>`$${s.toFixed(2)}`,es=s=>`${G[new Date(s).getMonth()]} ${new Date(s).getFullYear()}`;function J({rating:s,maxRating:t,color:a="#FFC633",size:n="1rem"}){const i=Math.floor(s),r=Math.ceil(s-i),o=t-(i+r);return e.jsx("div",{children:e.jsxs("ul",{className:"flex gap-2",children:[Array.from({length:i}).map(c=>e.jsx("li",{children:e.jsx($,{color:a,size:n})},x())),Array.from({length:r}).map(c=>e.jsx("li",{children:e.jsx(R,{color:a,size:n})},x())),Array.from({length:o}).map(c=>e.jsx("li",{children:e.jsx(D,{color:a,size:n})},x()))]})})}function O({price:s}){const t=s.current.value,a=s.current.discount,n=t-t/100*a;return e.jsxs("p",{className:"my-4 flex items-center gap-2 text-sm font-semibold capitalize md:gap-4 md:text-2xl",children:[p(n),e.jsx("span",{className:"text-stone-400 line-through",children:p(t)}),e.jsxs("span",{className:"rounded-full bg-red-100 px-2 py-1 text-[1rem] text-red-400 md:px-6",children:[a,"%"]})]})}const ts=async()=>{try{return(await g("wishlist")).data.data.wishList}catch(s){throw new Error(s.response.data.message)}},Q=async s=>{try{await g("wishlist",{method:"PATCH",data:{productId:s}})}catch(t){throw new Error(t.response.data.message)}},U=async s=>{try{await g("wishlist",{method:"DELETE",data:{productId:s}})}catch(t){throw new Error(t.response.data.message)}};function K(){const s=w(),{mutate:t,isPending:a}=v({mutationFn:Q,onSuccess:()=>{l.success("Product added to wishlist successfully"),s.invalidateQueries({queryKey:["wishlist"]})},onError:n=>{l.error(n.message)}});return{addToWishList:t,isAdding:a}}function Y(){const s=w(),{mutate:t,isPending:a}=v({mutationFn:U,onSuccess:()=>{l.success("Product removed from wishlist successfully"),s.invalidateQueries({queryKey:["wishlist"]})},onError:n=>{l.error(n.message)}});return{removeFromWishList:t,isPending:a}}function z(s){return q({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M352.92 80C288 80 256 144 256 144s-32-64-96.92-64c-52.76 0-94.54 44.14-95.08 96.81-1.1 109.33 86.73 187.08 183 252.42a16 16 0 0 0 18 0c96.26-65.34 184.09-143.09 183-252.42-.54-52.67-42.32-96.81-95.08-96.81z"},child:[]}]})(s)}function V({top:s,left:t,right:a,bottom:n,productId:i}){const r=y(),o=C(),c=j(P),{addToWishList:b,isAdding:L}=K(),{removeFromWishList:F,isRemoving:N}=Y(),S=j(k)||[],d=L||N,m=S.some(h=>h===i);function f(h){if(h.stopPropagation(),!c)return r("/login");m?F(i,{onSuccess:o(A(i))}):b(i,{onSuccess:o(E(i))})}return e.jsxs("div",{className:"absolute right-4 top-4",children:[d&&e.jsx(H,{}),!d&&m&&e.jsx(I,{className:"cursor-pointer text-xl text-pink-500",role:"button",onClick:f}),!d&&!m&&e.jsx(z,{className:"cursor-pointer text-xl",role:"button",onClick:f})]})}function as({product:s,size:t}){const a=y(),n=t==="sm"?"w-[10.7rem]":"w-44",i=r=>{r.stopPropagation(),a(`/shop/${s._id}`)};return e.jsxs(u,{children:[e.jsxs("div",{className:"shrink-1 relative w-40 cursor-pointer md:w-72",children:[e.jsx(V,{productId:s._id}),e.jsx(u.Open,{id:s._id,children:e.jsx("img",{className:`aspect-square ${n} overflow-hidden rounded-xl bg-stone-200 object-cover object-top md:w-72`,src:s.imageUrl,alt:"product"})}),e.jsxs("div",{onClick:i,children:[e.jsx("h4",{className:"font-bold",children:s.name}),e.jsx(J,{rating:s.rating.rate,maxRating:5}),e.jsx(O,{price:s.price})]})]}),e.jsx(u.Window,{id:s._id,children:e.jsx(_,{images:[s.imageUrl,...s.additionalImageUrls]})})]})}export{O as P,J as S,as as a,ts as b,es as f};
