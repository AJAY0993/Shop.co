import{r as W,j as e,e as x,f as p,h as w,_ as v,u as y,b as C,a as f,m as P,B as k,C as A,D as M}from"./index-B9li8m8z.js";import{g as T,h as $,i as E,j as R,k as D,G as q,l as H,m as I}from"./Header-YPTMm3Ox.js";import{M as h}from"./Modal-H3rj5KVh.js";function _({images:s}){const t=s.length,[a,i]=W.useState(0),n=r=>{r==="inc"&&(a===t-1?i(0):i(o=>o+1)),r==="dec"&&i(a===0?t-1:o=>o-1)};return e.jsx("div",{className:"relative mx-auto max-w-[35rem] ",children:e.jsxs("div",{className:" mx-auto flex w-72 items-center justify-center bg-stone-50 sm:w-[35rem]",children:[e.jsx("button",{className:"absolute left-12 top-1/2 -translate-y-1/2 ",onClick:()=>n("dec"),children:e.jsx(T,{})}),e.jsx(B,{src:s[a]}),e.jsx("button",{className:"absolute right-12 top-1/2 -translate-y-1/2",onClick:()=>n("inc"),children:e.jsx($,{})})]})})}function B({src:s}){return e.jsx("img",{className:"mx-auto  aspect-square object-contain object-center",src:s})}const G=["January","February","March","April","May","June","July","August","September","October","November","December"],u=()=>Math.random().toString(36).substr(2,6),j=s=>`$${s.toFixed(2)}`,es=s=>`${G[new Date(s).getMonth()]} ${new Date(s).getFullYear()}`;function J({rating:s,maxRating:t,color:a="#FFC633",size:i="1rem"}){const n=Math.floor(s),r=Math.ceil(s-n),o=t-(n+r);return e.jsx("div",{children:e.jsxs("ul",{className:"flex gap-2",children:[Array.from({length:n}).map(c=>e.jsx("li",{children:e.jsx(E,{color:a,size:i})},u())),Array.from({length:r}).map(c=>e.jsx("li",{children:e.jsx(R,{color:a,size:i})},u())),Array.from({length:o}).map(c=>e.jsx("li",{children:e.jsx(D,{color:a,size:i})},u()))]})})}function O({price:s}){const t=s.current.value,a=s.current.discount,i=t-t/100*a;return e.jsxs("p",{className:"my-4 flex items-center gap-2 text-sm font-semibold capitalize md:gap-4 md:text-2xl",children:[j(i),e.jsx("span",{className:"text-stone-400 line-through",children:j(t)}),e.jsxs("span",{className:"rounded-full bg-red-100 px-2 py-1 text-[1rem] text-red-400 md:px-6",children:[a,"%"]})]})}const ts=async()=>{try{return(await x("wishlist")).data.data.wishList}catch(s){throw new Error(s.response.data.message)}},Q=async s=>{try{await x("wishlist",{method:"PATCH",data:{productId:s}})}catch(t){throw new Error(t.response.data.message)}},U=async s=>{try{await x("wishlist",{method:"DELETE",data:{productId:s}})}catch(t){throw new Error(t.response.data.message)}};function K(){const s=p(),{mutate:t,isPending:a}=w({mutationFn:Q,onSuccess:()=>{v.success("Product added to wishlist successfully"),s.invalidateQueries({queryKey:["wishlist"]})}});return{addToWishList:t,isAdding:a}}function Y(){const s=p(),{mutate:t,isPending:a}=w({mutationFn:U,onSuccess:()=>{v.success("Product removed from wishlist successfully"),s.invalidateQueries({queryKey:["wishlist"]})}});return{removeFromWishList:t,isPending:a}}function z(s){return q({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M352.92 80C288 80 256 144 256 144s-32-64-96.92-64c-52.76 0-94.54 44.14-95.08 96.81-1.1 109.33 86.73 187.08 183 252.42a16 16 0 0 0 18 0c96.26-65.34 184.09-143.09 183-252.42-.54-52.67-42.32-96.81-95.08-96.81z"},child:[]}]})(s)}function V({top:s,left:t,right:a,bottom:i,productId:n}){const r=y(),o=C(),c=f(P),{addToWishList:b,isAdding:L}=K(),{removeFromWishList:F,isRemoving:N}=Y(),S=f(k)||[],l=L||N,d=S.some(m=>m===n);function g(m){if(m.stopPropagation(),!c)return r("/login");d?F(n,{onSuccess:o(A(n))}):b(n,{onSuccess:o(M(n))})}return e.jsxs("div",{className:"absolute right-4 top-4",children:[l&&e.jsx(H,{}),!l&&d&&e.jsx(I,{className:"cursor-pointer text-xl text-pink-500",role:"button",onClick:g}),!l&&!d&&e.jsx(z,{className:"cursor-pointer text-xl",role:"button",onClick:g})]})}function as({product:s,size:t}){const a=y(),i=t==="sm"?"w-[10.7rem]":"w-44",n=r=>{r.stopPropagation(),a(`/shop/${s._id}`)};return e.jsxs(h,{children:[e.jsxs("div",{className:"shrink-1 relative w-40 cursor-pointer md:w-72",children:[e.jsx(V,{productId:s._id}),e.jsx(h.Open,{id:s._id,children:e.jsx("img",{className:`aspect-square ${i} overflow-hidden rounded-xl bg-stone-200 object-cover object-top md:w-72`,src:s.imageUrl,alt:"product"})}),e.jsxs("div",{onClick:n,children:[e.jsx("h4",{className:"font-bold",children:s.name}),e.jsx(J,{rating:s.rating.rate,maxRating:5}),e.jsx(O,{price:s.price})]})]}),e.jsx(h.Window,{id:s._id,children:e.jsx(_,{images:[s.imageUrl,...s.additionalImageUrls]})})]})}export{O as P,J as S,as as a,ts as b,es as f};
