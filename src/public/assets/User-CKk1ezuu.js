import{r as a,j as e,z as b,b as F,A as R,B as w,_ as j,C as U,a as h,k as P,i as S,N as M}from"./index-BMyKNlCa.js";import{H as E,N as O,F as C}from"./Header-DFx5EHuj.js";import{C as L}from"./Container-CZvCgFwx.js";import{c as N,N as A,F as k}from"./NoMatchFound-BXStSVTS.js";import{S as d}from"./Subtitle-Cqx07ZsU.js";import{S as v,T as I,B as g}from"./Button-4SsAZAd0.js";import{L as q}from"./List-DKWTi6NT.js";import{u as B}from"./useQuery-vprKXQUN.js";import{f as H,O as T}from"./OrderHeader-DVCY7HBN.js";const V=a.forwardRef(({editingMode:r,profilePic:t},s)=>e.jsxs("div",{className:"relative h-12 w-12 overflow-hidden rounded-full",children:[r&&e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"absolute bottom-0 left-0 right-0 top-0 flex cursor-pointer items-center justify-center bg-stone-400 bg-opacity-50 ",htmlFor:"profilePic",children:e.jsx(N,{className:"hover:block"})}),e.jsx("input",{className:"absolute h-0 w-0",id:"profilePic",type:"file",name:"profilePic",ref:s})]}),e.jsx("img",{src:t,alt:"user avatar"})]})),_=a.forwardRef(({editingMode:r,username:t},s)=>e.jsxs("div",{className:"flex flex-col items-center",children:[!r&&e.jsx(d,{children:t}),r&&e.jsxs("label",{className:"text-xl font-medium",htmlFor:"",children:["Username:",e.jsx("input",{className:" text-center hover:border-0 hover:outline-0 focus:outline-2",defaultValue:t,name:"username",ref:s})]})]})),z=a.forwardRef(({editingMode:r,email:t},s)=>e.jsxs("div",{className:"flex flex-col items-center",children:[!r&&e.jsx(d,{children:t}),r&&e.jsxs("label",{className:"text-xl font-medium ",children:["Email:",e.jsx("input",{className:" text-center  hover:border-0 hover:outline-0  focus:outline-2",defaultValue:t,name:"email",ref:s})]})]})),D=a.forwardRef(({editingMode:r,address:t},s)=>e.jsx("div",{className:"flex flex-col items-center justify-center",children:r?e.jsxs("label",{className:"text-xl font-medium",htmlFor:"address",children:["Address:",e.jsx("textarea",{id:"address",className:" min-w-72 text-center hover:border-0 hover:outline-0 focus:outline-2",defaultValue:t,name:"email",ref:s})]}):e.jsx(d,{children:e.jsx("address",{children:t})})}));function Q(){const{data:r,isLoading:t,isError:s,error:n}=B({queryFn:H,queryKey:["MyOrders"]});return{orders:r,isLoading:t,isError:s,error:n}}function Y(){const{orders:r,isLoading:t}=Q();return t?e.jsx(v,{}):e.jsxs("div",{className:"w-full space-y-4",children:[e.jsx(I,{align:"left",children:"Your Past Orders"}),e.jsx(q,{items:r,render:s=>e.jsx(T,{status:s.status,id:s._id}),emptyListItem:e.jsx(A,{message:"You have not ordered anything yet start ordering now"})})]})}function K(){b();const r=F(),{mutate:t,isUpdating:s,isError:n,error:l}=R({mutationFn:w,onSuccess:i=>{j.success("Profile updated successfully"),r(U(i))},onError:i=>{j.error(i.message)}});return{updateMe:t,isUpdating:s,isError:n,error:l}}function X(){const r=h(P),t=h(S),[s,n]=a.useState(!1),{updateMe:l,isUpdating:i}=K(),c=a.useRef(),m=a.useRef(),f=a.useRef(),x=a.useRef(),p=()=>n(u=>!u),y=u=>{u.preventDefault();const o={};o.username=m.current.value,o.email=f.current.value,o.address=x.current.value,c.current.files.length>0&&(o.profilePic=c.current.files[0]),l(o)};return i?e.jsx(v,{}):e.jsxs(e.Fragment,{children:[!t&&e.jsx(M,{to:"/login",replace:!0}),e.jsxs("main",{className:"relative flex flex-col items-center justify-center p-2",children:[e.jsx(g,{className:"absolute right-4 top-4 aspect-square w-8 rounded-full",children:s?e.jsx(k,{onClick:p}):e.jsx(N,{onClick:p})}),e.jsxs("form",{className:" flex flex-col items-center gap-4",encType:"multipart/form-data",onSubmit:y,children:[e.jsx(V,{editingMode:s,profilePic:r.profilePic,ref:c}),e.jsx(_,{editingMode:s,username:r.username,ref:m}),e.jsx(z,{editingMode:s,email:r.email,ref:f}),e.jsx(D,{editingMode:s,address:r.address,ref:x}),s&&e.jsx(g,{type:"primary",size:"sm",children:"Save"})]}),e.jsx(Y,{})]})]})}function ae(){return e.jsxs(e.Fragment,{children:[e.jsx(E,{}),e.jsx(L,{className:"px-2",children:e.jsx(X,{})}),e.jsx(O,{}),e.jsx(C,{})]})}export{ae as default};
