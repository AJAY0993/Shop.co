import{a as o,g as E,b as L,j as e,e as P,f as j,h as F,u as I,i as T,k,l as G,m as $}from"./index-JCQVE_DQ.js";import{L as A}from"./List-CdV5a35p.js";import{R as f,c as R,H as D,N as J,F as q}from"./Header-CJ6SO_IJ.js";import{B as p,T as M}from"./Button-BkPiXtO2.js";import{C as O}from"./CartController-DAtF_OBy.js";import{S as g}from"./Subtitle-6dbXbJh0.js";import{C as Q}from"./Container-BH20uvJ8.js";function W({cartItem:n}){const t=(o(E(n._id))*n.price.current.value).toFixed(2),a=L(),s=()=>a(P(n._id));return e.jsx("div",{children:e.jsxs(f,{classes:"py-2 gap-[.75rem] md:gap-4 items-center relative",children:[e.jsx("img",{className:"aspect-square h-20 rounded-xl object-cover object-top md:h-32",src:n.imageUrl}),e.jsxs("div",{children:[e.jsx("h5",{className:" max-w-[80%] text-base font-semibold md:text-xl",children:n.name}),e.jsxs("p",{className:"text-[.8rem] md:text-base",children:["size ",e.jsx("span",{children:"7"})]}),e.jsxs("p",{className:"text-[.8rem] md:text-base",children:["color ",e.jsx("span",{children:"red"})]}),e.jsx("span",{className:"font-semibold md:text-lg",children:t})]}),e.jsx("div",{className:"absolute right-2 top-2",children:e.jsx(p,{type:"raw",children:e.jsx(R,{className:"text-stone-600 hover:text-red-600",onClick:s})})}),e.jsx("div",{className:"absolute bottom-2 right-2 flex flex-col justify-self-end",children:e.jsx(O,{product:n})})]})})}function X(){return e.jsxs("div",{className:"mx-auto flex  max-w-80 flex-col gap-8 text-center",children:[e.jsx("img",{src:"/emptyCart.svg"}),e.jsx(g,{children:"I am empty"}),e.jsx("div",{children:e.jsx(p,{type:"primary",to:"/shop",children:"Go and Add"})})]})}function _(){const n=o(j);return e.jsx(A,{className:" flex-grow-5 divide-y-[1px] rounded-3xl border-2 border-stone-400 p-2 md:p-6 ",items:n,render:r=>e.jsx(W,{cartItem:r},Math.random().toString(36).slice(2,6)),emptyListItem:e.jsx(X,{})})}function z(){return e.jsx(M,{align:"left",children:"Your cart"})}function d({name:n,value:r,color:t="neutral-950"}){return e.jsx("li",{children:e.jsxs("div",{className:"flex justify-between capitalize",children:[e.jsx("span",{className:"text-stone-500",children:n}),e.jsx("span",{className:`font-semibold text-${t}`,children:r})]})})}var y="https://js.stripe.com/v3",B=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,h="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",U=function(){for(var r=document.querySelectorAll('script[src^="'.concat(y,'"]')),t=0;t<r.length;t++){var a=r[t];if(B.test(a.src))return a}return null},v=function(r){var t=r&&!r.advancedFraudSignals?"?advancedFraudSignals=false":"",a=document.createElement("script");a.src="".concat(y).concat(t);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(a),a},V=function(r,t){!r||!r._registerWrapper||r._registerWrapper({name:"stripe-js",version:"3.3.0",startTime:t})},l=null,u=null,m=null,H=function(r){return function(){r(new Error("Failed to load Stripe.js"))}},Y=function(r,t){return function(){window.Stripe?r(window.Stripe):t(new Error("Stripe.js not available"))}},K=function(r){return l!==null?l:(l=new Promise(function(t,a){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe&&r&&console.warn(h),window.Stripe){t(window.Stripe);return}try{var s=U();if(s&&r)console.warn(h);else if(!s)s=v(r);else if(s&&m!==null&&u!==null){var i;s.removeEventListener("load",m),s.removeEventListener("error",u),(i=s.parentNode)===null||i===void 0||i.removeChild(s),s=v(r)}m=Y(t,a),u=H(a),s.addEventListener("load",m),s.addEventListener("error",u)}catch(x){a(x);return}}),l.catch(function(t){return l=null,Promise.reject(t)}))},Z=function(r,t,a){if(r===null)return null;var s=r.apply(void 0,t);return V(s,a),s},c,w=!1,S=function(){return c||(c=K(null).catch(function(r){return c=null,Promise.reject(r)}),c)};Promise.resolve().then(function(){return S()}).catch(function(n){w||console.warn(n)});var ee=function(){for(var r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];w=!0;var s=Date.now();return S().then(function(i){return Z(i,t,s)})};const re=async n=>(await F("checkout",{method:"POST",data:{items:n}})).data.data.session;function te(){const n=I(),r=o(T),t=o(j),a=o(k),s=o(G),i=o($),x=(a+i-s).toFixed(2),b=async()=>{if(!r)return n("/login");const C=await ee("pk_test_51P4fQhSGowosMs9tJozifuX1d39JCzydl9JJbbF5CCX5GpCYJII4eXFbfO26KM7kGpVt7yP1oMDakQNlpL1lDGky00lJWmS5gq"),N=await re(t);C.redirectToCheckout({sessionId:N.id})};return t.length<1?null:e.jsxs("div",{className:"flex-grow  self-start rounded-3xl border-2 border-stone-400 px-4 py-2 md:flex-grow-0",children:[e.jsx(g,{children:"Order summary"}),e.jsxs("ul",{className:"flex flex-col gap-3 py-4",children:[e.jsx(d,{name:"subtotal",value:`$${a}`}),e.jsx(d,{name:"discount",value:`$${s}`,color:"red-600"}),e.jsx(d,{name:"delievery fee",value:`$${i}`}),e.jsx(d,{name:"total price",value:`$${x}`})]}),e.jsxs(f,{classes:"flex-nowrap gap-2 my-2",children:[e.jsx("input",{className:"flex flex-grow rounded-full bg-stone-200 px-4 py-2",placeholder:"Apply promo code"}),e.jsx(p,{type:"primary",children:"apply"})]}),e.jsx("div",{className:"mx-auto my-2 w-[16rem] md:w-96",children:e.jsxs(p,{type:"primary",enlarge:!1,onClick:b,children:["Go to checkout",e.jsx("span",{className:"mx-2 transition-all hover:translate-x-8",children:"â†’"})]})})]})}function de(){return e.jsxs(e.Fragment,{children:[e.jsx(D,{}),e.jsxs(Q,{className:"px-2",children:[e.jsx(z,{}),e.jsxs(f,{classes:"flex-wrap gap-2",children:[e.jsx(_,{}),e.jsx(te,{})]})]}),e.jsx(J,{}),e.jsx(q,{})]})}export{de as default};
