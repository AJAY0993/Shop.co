import{r as a,j as e,f as b,b as F,h as R,E as w,_ as j,F as U,a as h,l as P,m as S,N as E}from"./index-BnkrY95Y.js";import{H as M,N as O,F as L}from"./Header-DkqKkmjD.js";import{C}from"./Container-C37D18zN.js";import{c as N,F as A}from"./index-DbKbEp8Y.js";import{S as d}from"./Subtitle-DdQQYEXI.js";import{S as v,T as I,B as g}from"./Button-CemciDzJ.js";import{L as k}from"./List-DbKq5tBH.js";import{N as q}from"./NoMatchFound-Dxa_5Bw-.js";import{u as H}from"./useQuery-AlqBGSsV.js";import{f as T,O as V}from"./OrderHeader-MSQZ9rHq.js";const _=a.forwardRef(({editingMode:r,profilePic:t},s)=>e.jsxs("div",{className:"relative h-12 w-12 overflow-hidden rounded-full",children:[r&&e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"absolute bottom-0 left-0 right-0 top-0 flex cursor-pointer items-center justify-center bg-stone-400 bg-opacity-50 ",htmlFor:"profilePic",children:e.jsx(N,{className:"hover:block"})}),e.jsx("input",{className:"absolute h-0 w-0",id:"profilePic",type:"file",name:"profilePic",ref:s})]}),e.jsx("img",{src:t,alt:"user avatar"})]})),B=a.forwardRef(({editingMode:r,username:t},s)=>e.jsxs("div",{className:"flex flex-col items-center",children:[!r&&e.jsx(d,{children:t}),r&&e.jsxs("label",{className:"text-xl font-medium",htmlFor:"",children:["Username:",e.jsx("input",{className:" text-center hover:border-0 hover:outline-0 focus:outline-2",defaultValue:t,name:"username",ref:s})]})]})),D=a.forwardRef(({editingMode:r,email:t},s)=>e.jsxs("div",{className:"flex flex-col items-center",children:[!r&&e.jsx(d,{children:t}),r&&e.jsxs("label",{className:"text-xl font-medium ",children:["Email:",e.jsx("input",{className:" text-center  hover:border-0 hover:outline-0  focus:outline-2",defaultValue:t,name:"email",ref:s})]})]})),Q=a.forwardRef(({editingMode:r,address:t},s)=>e.jsx("div",{className:"flex flex-col items-center justify-center",children:r?e.jsxs("label",{className:"text-xl font-medium",htmlFor:"address",children:["Address:",e.jsx("textarea",{id:"address",className:" min-w-72 text-center hover:border-0 hover:outline-0 focus:outline-2",defaultValue:t,name:"email",ref:s})]}):e.jsx(d,{children:e.jsx("address",{children:t})})}));function Y(){const{data:r,isLoading:t,isError:s,error:n}=H({queryFn:T,queryKey:["MyOrders"]});return{orders:r,isLoading:t,isError:s,error:n}}function z(){const{orders:r,isLoading:t}=Y();return t?e.jsx(v,{}):e.jsxs("div",{className:"w-full space-y-4",children:[e.jsx(I,{align:"left",children:"Your Past Orders"}),e.jsx(k,{className:"",items:r,render:s=>e.jsx(V,{status:s.status,id:s._id}),emptyListItem:e.jsx(q,{message:"You have not ordered anything yet start ordering now"})})]})}function K(){b();const r=F(),{mutate:t,isUpdating:s,isError:n,error:l}=R({mutationFn:w,onSuccess:i=>{j.success("Profile updated successfully"),r(U(i))},onError:i=>{j.error(i.message)}});return{updateMe:t,isUpdating:s,isError:n,error:l}}function X(){const r=h(P),t=h(S),[s,n]=a.useState(!1),{updateMe:l,isUpdating:i}=K(),c=a.useRef(),m=a.useRef(),f=a.useRef(),x=a.useRef(),p=()=>n(u=>!u),y=u=>{u.preventDefault();const o={};o.username=m.current.value,o.email=f.current.value,o.address=x.current.value,c.current.files.length>0&&(o.profilePic=c.current.files[0]),l(o)};return i?e.jsx(v,{}):e.jsx(e.Fragment,{children:e.jsxs("main",{className:"relative flex flex-col items-center justify-center p-2",children:[!t&&e.jsx(E,{to:"/login",replace:!0}),e.jsx(g,{className:"absolute right-4 top-4 aspect-square w-8 rounded-full",children:s?e.jsx(A,{onClick:p}):e.jsx(N,{onClick:p})}),e.jsxs("form",{className:" flex flex-col items-center gap-4",encType:"multipart/form-data",onSubmit:y,children:[e.jsx(_,{editingMode:s,profilePic:r.profilePic,ref:c}),e.jsx(B,{editingMode:s,username:r.username,ref:m}),e.jsx(D,{editingMode:s,email:r.email,ref:f}),e.jsx(Q,{editingMode:s,address:r.address,ref:x}),s&&e.jsx(g,{type:"primary",size:"sm",children:"Save"})]}),e.jsx(z,{})]})})}function ne(){return e.jsxs(e.Fragment,{children:[e.jsx(M,{}),e.jsx(C,{className:"px-2",children:e.jsx(X,{})}),e.jsx(O,{}),e.jsx(L,{})]})}export{ne as default};
