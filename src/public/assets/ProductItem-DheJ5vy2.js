import{r as S,j as e,h as g,z as w,A as v,_ as l,u as y,b as C,a as f,k as P,B as k,C as E,D as A}from"./index-yjcIFYCJ.js";import{g as T,h as M,i as R,j as $,k as q,G as H,l as I,m as _}from"./Header-CpMF560h.js";import{M as u}from"./Modal-Cwluzxb1.js";function B({images:s}){const t=s.length,[a,i]=S.useState(0),n=r=>{r==="inc"&&(a===t-1?i(0):i(o=>o+1)),r==="dec"&&i(a===0?t-1:o=>o-1)};return e.jsx("div",{className:"relative mx-auto max-w-[35rem] ",children:e.jsxs("div",{className:" mx-auto flex w-72 items-center justify-center bg-stone-50 sm:w-[35rem]",children:[e.jsx("button",{className:"absolute left-12 top-1/2 -translate-y-1/2 ",onClick:()=>n("dec"),children:e.jsx(T,{})}),e.jsx(D,{src:s[a]}),e.jsx("button",{className:"absolute right-12 top-1/2 -translate-y-1/2",onClick:()=>n("inc"),children:e.jsx(M,{})})]})})}function D({src:s}){return e.jsx("img",{className:"mx-auto  aspect-square object-contain object-center",src:s})}const x=()=>Math.random().toString(36).substr(2,6),p=s=>`$${s.toFixed(2)}`;function G({rating:s,maxRating:t,color:a="#FFC633",size:i="1rem"}){const n=Math.floor(s),r=Math.ceil(s-n),o=t-(n+r);return e.jsx("div",{children:e.jsxs("ul",{className:"flex gap-2",children:[Array.from({length:n}).map(c=>e.jsx("li",{children:e.jsx(R,{color:a,size:i})},x())),Array.from({length:r}).map(c=>e.jsx("li",{children:e.jsx($,{color:a,size:i})},x())),Array.from({length:o}).map(c=>e.jsx("li",{children:e.jsx(q,{color:a,size:i})},x()))]})})}function Q({price:s}){const t=s.current.value,a=s.current.discount,i=t-t/100*a;return e.jsxs("p",{className:"my-4 flex items-center gap-2 text-sm font-semibold capitalize md:gap-4 md:text-2xl",children:[p(i),e.jsx("span",{className:"text-stone-400 line-through",children:p(t)}),e.jsxs("span",{className:"rounded-full bg-red-100 px-2 py-1 text-[1rem] text-red-400 md:px-6",children:[a,"%"]})]})}const ss=async()=>{try{return(await g("wishlist")).data.data.wishList}catch(s){throw new Error(s.response.data.message)}},U=async s=>{try{await g("wishlist",{method:"PATCH",data:{productId:s}})}catch(t){throw new Error(t.response.data.message)}},K=async s=>{try{await g("wishlist",{method:"DELETE",data:{productId:s}})}catch(t){throw new Error(t.response.data.message)}};function O(){const s=w(),{mutate:t,isPending:a}=v({mutationFn:U,onSuccess:()=>{l.success("Product added to wishlist successfully"),s.invalidateQueries({queryKey:["wishlist"]})},onError:i=>{l.error(i.message)}});return{addToWishList:t,isAdding:a}}function z(){const s=w(),{mutate:t,isPending:a}=v({mutationFn:K,onSuccess:()=>{l.success("Product removed from wishlist successfully"),s.invalidateQueries({queryKey:["wishlist"]})},onError:i=>{l.error(i.message)}});return{removeFromWishList:t,isPending:a}}function J(s){return H({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M352.92 80C288 80 256 144 256 144s-32-64-96.92-64c-52.76 0-94.54 44.14-95.08 96.81-1.1 109.33 86.73 187.08 183 252.42a16 16 0 0 0 18 0c96.26-65.34 184.09-143.09 183-252.42-.54-52.67-42.32-96.81-95.08-96.81z"},child:[]}]})(s)}function V({top:s,left:t,right:a,bottom:i,productId:n}){const r=y(),o=C(),c=f(P),{addToWishList:L,isAdding:b}=O(),{removeFromWishList:F,isRemoving:W}=z(),N=f(k)||[],d=b||W,m=N.some(h=>h===n);function j(h){if(h.stopPropagation(),!c)return r("/login");m?F(n,{onSuccess:o(E(n))}):L(n,{onSuccess:o(A(n))})}return e.jsxs("div",{className:"absolute right-4 top-4",children:[d&&e.jsx(I,{}),!d&&m&&e.jsx(_,{className:"cursor-pointer text-xl text-pink-500",role:"button",onClick:j}),!d&&!m&&e.jsx(J,{className:"cursor-pointer text-xl",role:"button",onClick:j})]})}function es({product:s,size:t}){const a=y(),i=t==="sm"?"w-[10.7rem]":"w-44",n=r=>{r.stopPropagation(),a(`/shop/${s._id}`)};return e.jsxs(u,{children:[e.jsxs("div",{className:"shrink-1 relative w-40 cursor-pointer md:w-72",children:[e.jsx(V,{productId:s._id}),e.jsx(u.Open,{id:s._id,children:e.jsx("img",{className:`aspect-square ${i} overflow-hidden rounded-xl bg-stone-200 object-cover object-top md:w-72`,src:s.imageUrl,alt:"product"})}),e.jsxs("div",{onClick:n,children:[e.jsx("h4",{className:"font-bold",children:s.name}),e.jsx(G,{rating:s.rating.rate,maxRating:5}),e.jsx(Q,{price:s.price})]})]}),e.jsx(u.Window,{id:s._id,children:e.jsx(B,{images:[s.imageUrl,...s.additionalImageUrls]})})]})}export{Q as P,G as S,es as a,ss as f};
