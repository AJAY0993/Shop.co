import{r as i,j as t,t as h,u as g}from"./index-JCQVE_DQ.js";import{g as f,h as j,G as p,i as b,j as v,k as N}from"./Header-CJ6SO_IJ.js";function w({images:e}){const n=e.length,[s,a]=i.useState(0),r=o=>{o==="inc"&&(s===n-1?a(0):a(l=>l+1)),o==="dec"&&a(s===0?n-1:l=>l-1)};return t.jsx("div",{className:"relative mx-auto max-w-[35rem] ",children:t.jsxs("div",{className:" mx-auto flex w-72 items-center justify-center bg-stone-50 sm:w-[35rem]",children:[t.jsx("button",{className:"absolute left-12 top-1/2 -translate-y-1/2 ",onClick:()=>r("dec"),children:t.jsx(f,{})}),t.jsx(y,{src:e[s]}),t.jsx("button",{className:"absolute right-12 top-1/2 -translate-y-1/2",onClick:()=>r("inc"),children:t.jsx(j,{})})]})})}function y({src:e}){return t.jsx("img",{className:"mx-auto  aspect-square object-contain object-center",src:e})}function C(e){return p({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"},child:[]}]})(e)}const m=i.createContext();function c({children:e}){const[n,s]=i.useState(""),a=()=>s(""),r=s;return t.jsx(m.Provider,{value:{open:r,close:a,openId:n},children:e})}function I({children:e,id:n}){const{open:s}=i.useContext(m);return i.cloneElement(e,{onClick:()=>s(n)})}function S({children:e,id:n}){const{openId:s,close:a}=i.useContext(m);return s!==n?null:t.jsxs(P,{children:[t.jsx("button",{className:" absolute right-4 top-4 aspect-square w-12 rounded-full bg-stone-950 text-lg transition-all active:scale-75",onClick:a,children:t.jsx(C,{className:" absolute left-1/2 top-1/2 -translate-x-1/2  -translate-y-1/2 text-stone-50 ",fontWeight:600,fontSize:"1.75rem"})}),t.jsx("div",{className:"fixed  left-1/2  top-1/2 -translate-x-1/2 -translate-y-1/2",children:e})]})}c.Window=S;c.Open=I;function P({children:e}){return h.createPortal(t.jsx("div",{className:"fixed bottom-0 left-0 right-0 top-0 z-[100000] bg-stone-800 bg-opacity-45",children:e}),document.body)}const d=()=>Math.random().toString(36).substr(2,6),u=e=>`$${e.toFixed(2)}`;function F({rating:e,maxRating:n,color:s="#FFC633",size:a="1rem"}){const r=Math.floor(e),o=Math.ceil(e-r),l=n-(r+o);return t.jsx("div",{children:t.jsxs("ul",{className:"flex gap-2",children:[Array.from({length:r}).map(x=>t.jsx("li",{children:t.jsx(b,{color:s,size:a})},d())),Array.from({length:o}).map(x=>t.jsx("li",{children:t.jsx(v,{color:s,size:a})},d())),Array.from({length:l}).map(x=>t.jsx("li",{children:t.jsx(N,{color:s,size:a})},d()))]})})}function M({price:e}){const n=e.current.value,s=e.current.discount,a=n-n/100*s;return t.jsxs("p",{className:"my-4 flex items-center gap-2 text-sm font-semibold capitalize md:gap-4 md:text-2xl",children:[u(a),t.jsx("span",{className:"text-stone-400 line-through",children:u(n)}),t.jsxs("span",{className:"rounded-full bg-red-100 px-2 py-1 text-[1rem] text-red-400 md:px-6",children:[s,"%"]})]})}function O({product:e,size:n}){const s=g(),a=n==="sm"?"w-[10.7rem]":"w-44",r=o=>{o.stopPropagtion,o.target.tagName!=="IMG"&&s(`/${e._id}`)};return t.jsxs(c,{children:[t.jsxs("div",{className:"shrink-1 w-40 cursor-pointer md:w-72",onClick:r,children:[t.jsx(c.Open,{id:e._id,children:t.jsx("img",{className:`aspect-square ${a} overflow-hidden rounded-xl bg-stone-200 object-cover object-top md:w-72`,src:e.imageUrl,alt:"product"})}),t.jsx("h4",{className:"font-bold",children:e.name}),t.jsx(F,{rating:e.rating.rate,maxRating:5}),t.jsx(M,{price:e.price})]}),t.jsx(c.Window,{id:e._id,children:t.jsx(w,{images:[e.imageUrl,...e.additionalImageUrls]})})]})}export{M as P,F as S,O as a};
